<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ps2KeyboardHost: ps2::Keyboard&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ps2KeyboardHost
   &#160;<span id="projectnumber">1.0.1</span>
   </div>
   <div id="projectbrief">Allows you to read from one or more PS2-style keyboards on an Arduino.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classps2_1_1_keyboard.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classps2_1_1_keyboard-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ps2::Keyboard&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Instances of this class can be used to interface with a PS2 keyboard. This class does not decode the keystroke protocol, but rather provides the data from the keyboard in a raw form. You either need to write code that directly understands what the PS2 is providing, or use one of the provided translator classes (e.g. <a class="el" href="classps2_1_1_ansi_translator.html">AnsiTranslator</a>).  
 <a href="classps2_1_1_keyboard.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ps2___keyboard_8h_source.html">ps2_Keyboard.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab4f105227693886082dc5754911524a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#ab4f105227693886082dc5754911524a8">Keyboard</a> (Diagnostics &amp;diagnostics= *Diagnostics::defaultInstance())</td></tr>
<tr class="separator:ab4f105227693886082dc5754911524a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a7278f6c873169a08f3d146099de48a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a7a7278f6c873169a08f3d146099de48a">begin</a> ()</td></tr>
<tr class="separator:a7a7278f6c873169a08f3d146099de48a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47cb2867f1970bda5508df772563c9a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a47cb2867f1970bda5508df772563c9a4">awaitStartup</a> (uint16_t timeoutInMillis=750)</td></tr>
<tr class="memdesc:a47cb2867f1970bda5508df772563c9a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">After the keyboard gets power, the PS2 keyboard sends a code that indicates successful or unsuccessful startup. This waits for that to happen.  <a href="#a47cb2867f1970bda5508df772563c9a4">More...</a><br /></td></tr>
<tr class="separator:a47cb2867f1970bda5508df772563c9a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87092193e003b94cf3ced61b36f3cde0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceps2.html#a5bc33a2de7ec8ab6dd653393f378956b">KeyboardOutput</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a87092193e003b94cf3ced61b36f3cde0">readScanCode</a> ()</td></tr>
<tr class="memdesc:a87092193e003b94cf3ced61b36f3cde0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the last code sent by the keyboard.  <a href="#a87092193e003b94cf3ced61b36f3cde0">More...</a><br /></td></tr>
<tr class="separator:a87092193e003b94cf3ced61b36f3cde0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae81db544fd55b6aaba74e625d84d4a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#abae81db544fd55b6aaba74e625d84d4a">sendLedStatus</a> (<a class="el" href="namespaceps2.html#ab1f1a2199d2e9075dbc006a91fd2f71c">KeyboardLeds</a> ledStatus)</td></tr>
<tr class="memdesc:abae81db544fd55b6aaba74e625d84d4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the keyboard's onboard LED's.  <a href="#abae81db544fd55b6aaba74e625d84d4a">More...</a><br /></td></tr>
<tr class="separator:abae81db544fd55b6aaba74e625d84d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9e5414dda4640678bade8115a37f4d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a3a9e5414dda4640678bade8115a37f4d">reset</a> (uint16_t timeoutInMillis=1000)</td></tr>
<tr class="memdesc:a3a9e5414dda4640678bade8115a37f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the keyboard and returns true if the keyboard appears well, false otherwise.  <a href="#a3a9e5414dda4640678bade8115a37f4d">More...</a><br /></td></tr>
<tr class="separator:a3a9e5414dda4640678bade8115a37f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d01a26f67fbedfb80c2a5080ce3e1a2"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a1d01a26f67fbedfb80c2a5080ce3e1a2">readId</a> ()</td></tr>
<tr class="memdesc:a1d01a26f67fbedfb80c2a5080ce3e1a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the device ID returned by the keyboard - according to the documentation, this will always be 0xab83. In the event of an error, this will return 0xffff.  <a href="#a1d01a26f67fbedfb80c2a5080ce3e1a2">More...</a><br /></td></tr>
<tr class="separator:a1d01a26f67fbedfb80c2a5080ce3e1a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3cbce3d98353b6c18a501209ea7941"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceps2.html#ab6ca63d33b95d82c35be1bb3e5479c80">ScanCodeSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a2a3cbce3d98353b6c18a501209ea7941">getScanCodeSet</a> ()</td></tr>
<tr class="memdesc:a2a3cbce3d98353b6c18a501209ea7941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current scancode set.  <a href="#a2a3cbce3d98353b6c18a501209ea7941">More...</a><br /></td></tr>
<tr class="separator:a2a3cbce3d98353b6c18a501209ea7941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f51d11f67c75ed2b688bcf62a68d9cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a0f51d11f67c75ed2b688bcf62a68d9cb">setScanCodeSet</a> (<a class="el" href="namespaceps2.html#ab6ca63d33b95d82c35be1bb3e5479c80">ScanCodeSet</a> newScanCodeSet)</td></tr>
<tr class="memdesc:a0f51d11f67c75ed2b688bcf62a68d9cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the current scancode set.  <a href="#a0f51d11f67c75ed2b688bcf62a68d9cb">More...</a><br /></td></tr>
<tr class="separator:a0f51d11f67c75ed2b688bcf62a68d9cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5a9d2f4e7cf961f70da765aed3d317"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a6e5a9d2f4e7cf961f70da765aed3d317">echo</a> ()</td></tr>
<tr class="memdesc:a6e5a9d2f4e7cf961f70da765aed3d317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the "Echo" command to the keyboard, which should send an "Echo" in return. This can be used to verifies that a keyboard is connected and working properly.  <a href="#a6e5a9d2f4e7cf961f70da765aed3d317">More...</a><br /></td></tr>
<tr class="separator:a6e5a9d2f4e7cf961f70da765aed3d317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac880a2789415d57986bd02a4566b5560"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#ac880a2789415d57986bd02a4566b5560">setTypematicRateAndDelay</a> (<a class="el" href="namespaceps2.html#a511e9920b7f2ef164f91c1740d0244bf">TypematicRate</a> rate, <a class="el" href="namespaceps2.html#a4adac7b7b12f82a8604ab93b647ba858">TypematicStartDelay</a> startDelay)</td></tr>
<tr class="memdesc:ac880a2789415d57986bd02a4566b5560"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the typematic rate (how fast presses come) and the delay (the time between key down and the start of auto-repeating.  <a href="#ac880a2789415d57986bd02a4566b5560">More...</a><br /></td></tr>
<tr class="separator:ac880a2789415d57986bd02a4566b5560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd0bd371ca016b923de9a5f6b468013"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a9bd0bd371ca016b923de9a5f6b468013">resetToDefaults</a> ()</td></tr>
<tr class="memdesc:a9bd0bd371ca016b923de9a5f6b468013"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores scan code set, typematic rate, and typematic delay.  <a href="#a9bd0bd371ca016b923de9a5f6b468013">More...</a><br /></td></tr>
<tr class="separator:a9bd0bd371ca016b923de9a5f6b468013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d10c145fd83c08c43309dc681e367f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a19d10c145fd83c08c43309dc681e367f">enable</a> ()</td></tr>
<tr class="memdesc:a19d10c145fd83c08c43309dc681e367f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows the keyboard to start sending data again.  <a href="#a19d10c145fd83c08c43309dc681e367f">More...</a><br /></td></tr>
<tr class="separator:a19d10c145fd83c08c43309dc681e367f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b45f986c1ad696e3825c42065bbc4d7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a1b45f986c1ad696e3825c42065bbc4d7">disable</a> ()</td></tr>
<tr class="memdesc:a1b45f986c1ad696e3825c42065bbc4d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes it so the keyboard will no longer responsd to keystrokes.  <a href="#a1b45f986c1ad696e3825c42065bbc4d7">More...</a><br /></td></tr>
<tr class="separator:a1b45f986c1ad696e3825c42065bbc4d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaacfec6413b37b4874876d5cf31d31c3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#aaacfec6413b37b4874876d5cf31d31c3">enableBreakAndTypematic</a> ()</td></tr>
<tr class="memdesc:aaacfec6413b37b4874876d5cf31d31c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-enables typematic and break (unmake, key release) for all keys.  <a href="#aaacfec6413b37b4874876d5cf31d31c3">More...</a><br /></td></tr>
<tr class="separator:aaacfec6413b37b4874876d5cf31d31c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4591c2f4bb382036a6ab9f618b94bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a4b4591c2f4bb382036a6ab9f618b94bf">disableBreakCodes</a> ()</td></tr>
<tr class="memdesc:a4b4591c2f4bb382036a6ab9f618b94bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes the keyboard no longer send "break" or "unmake" events when keys are released.  <a href="#a4b4591c2f4bb382036a6ab9f618b94bf">More...</a><br /></td></tr>
<tr class="separator:a4b4591c2f4bb382036a6ab9f618b94bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45b21796718e7ab5e3b13da51b60e9ae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a45b21796718e7ab5e3b13da51b60e9ae">disableBreakCodes</a> (const byte *specificKeys, int numKeys)</td></tr>
<tr class="memdesc:a45b21796718e7ab5e3b13da51b60e9ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instructs the keyboard to stop sending "break" codes for some keys (that is, it disables the notifications that come when a key is released.)  <a href="#a45b21796718e7ab5e3b13da51b60e9ae">More...</a><br /></td></tr>
<tr class="separator:a45b21796718e7ab5e3b13da51b60e9ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e21303747d4f61838e327b0f61d73e1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a8e21303747d4f61838e327b0f61d73e1">disableTypematic</a> ()</td></tr>
<tr class="memdesc:a8e21303747d4f61838e327b0f61d73e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes the keyboard no longer send multiple key down events while a key is held down.  <a href="#a8e21303747d4f61838e327b0f61d73e1">More...</a><br /></td></tr>
<tr class="separator:a8e21303747d4f61838e327b0f61d73e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa52b7fd667372da29910af999563223"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#aaa52b7fd667372da29910af999563223">disableBreakAndTypematic</a> ()</td></tr>
<tr class="memdesc:aaa52b7fd667372da29910af999563223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-enables typematic and break for all keys.  <a href="#aaa52b7fd667372da29910af999563223">More...</a><br /></td></tr>
<tr class="separator:aaa52b7fd667372da29910af999563223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7d6cac956d19257e89649330553f43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#aba7d6cac956d19257e89649330553f43">disableTypematic</a> (const byte *specificKeys, int numKeys)</td></tr>
<tr class="memdesc:aba7d6cac956d19257e89649330553f43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instructs the keyboard to disable typematic (additional key down events when the user presses and holds a key) for a given set of keys.  <a href="#aba7d6cac956d19257e89649330553f43">More...</a><br /></td></tr>
<tr class="separator:aba7d6cac956d19257e89649330553f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f20a09039d83674dafa89852d2e002"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classps2_1_1_keyboard.html#a70f20a09039d83674dafa89852d2e002">disableBreakAndTypematic</a> (const byte *specificKeys, int numKeys)</td></tr>
<tr class="memdesc:a70f20a09039d83674dafa89852d2e002"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instructs the keyboard to disable typematic (additional key down events when the user presses and holds a key) and break sequences (events that tell you when a key has been released) for a given set of keys.  <a href="#a70f20a09039d83674dafa89852d2e002">More...</a><br /></td></tr>
<tr class="separator:a70f20a09039d83674dafa89852d2e002"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt;<br />
class ps2::Keyboard&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;</h3>

<p>Instances of this class can be used to interface with a PS2 keyboard. This class does not decode the keystroke protocol, but rather provides the data from the keyboard in a raw form. You either need to write code that directly understands what the PS2 is providing, or use one of the provided translator classes (e.g. <a class="el" href="classps2_1_1_ansi_translator.html">AnsiTranslator</a>). </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">DataPin</td><td>The pin number of the pin that's connected to the PS2 data wire. </td></tr>
    <tr><td class="paramname">ClockPin</td><td>The pin number of the pin that's connected to the PS2 clock wire. This pin must be one that supports interrupts on your board. </td></tr>
    <tr><td class="paramname">BufferSize</td><td>The size of the internal buffer that stores the bytes coming from the keyboard between the time they're received from the ClockPin-based interrupts and the time they're consumed by calls to <a class="el" href="classps2_1_1_keyboard.html#a87092193e003b94cf3ced61b36f3cde0">readScanCode</a>. If you are calling that method very frequently (many times per millisecond) then 1 is enough. Expect each keystroke to eat about 4 bytes, so 16 can hold up to 4 keystrokes. There's nothing wrong with larger numbers, but you probably want some amount of responsiveness to user commands. </td></tr>
    <tr><td class="paramname">Diagnostics</td><td>A class that will record any unpleasantness that befalls your program such as the aforementioned buffer overflows. This is purely a debugging aid. If you don't need to be doing any debugging, you can stick wit the default, <a class="el" href="classps2_1_1_null_diagnostics.html">NullDiagnostics</a>, which has no-op implementations for all the event handlers. The C++ compiler will optimize empty implementations completely away, so you pay no penalty for having this debug code in your project if you don't use it. The <a class="el" href="classps2_1_1_simple_diagnostics.html">SimpleDiagnostics</a> implementation provides an implementation that records all the events.</td></tr>
  </table>
  </dd>
</dl>
<p>A great source of information about the PS2 keyboard can be found here: <a href="http://www.computer-engineering.org/ps2keyboard/">http://www.computer-engineering.org/ps2keyboard/</a>. This documentation assumes you have a basic grasp of that.</p>
<p>Most programs will use this class like this:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="classps2_1_1_keyboard.html">ps2::Keyboard&lt;4,2&gt;</a> ps2Keyboard(diagnostics);</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> setup() {</div><div class="line">  ps2Keyboard.begin();</div><div class="line">  ps2Keyboard.reset();</div><div class="line">  <span class="comment">// more keyboard setup if needed (e.g. set the scan code set)</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> loop() {</div><div class="line">  <a class="code" href="namespaceps2.html#a5bc33a2de7ec8ab6dd653393f378956b">ps2::KeyboardOutput</a> scanCode = ps2Keyboard.readScanCode();</div><div class="line">  <span class="keywordflow">if</span> (scanCode != <a class="code" href="namespaceps2.html#ab1f1a2199d2e9075dbc006a91fd2f71ca334c4a4c42fdb79d7ebc3e73b517e6f8">ps2::KeyboardOutput::none</a>) {</div><div class="line">    respondTo(scanCode);</div><div class="line">  };</div><div class="line">}</div></div><!-- fragment --><p>In this example, the keyboard is wired up with the data pin connected to pin 4 and the clock pin connected to pin 2. The setup function should start up the keyboard. In many cases, you really don't have to do anything other than call 'begin' to get going. Here, it calls 'reset' to undo whatever mode the keyboard might already be in. In the real world, this is unlikely to ever be necessary, but there you are. A more likely move would be to set the keyboard up in the PS/2 scan code set and perhaps disabling typematic or enabling unmake codes to make it easier to interpret the keyboard's protocol.</p>
<p>You should poll the keyboard from your loop implementation, as illustrated here.</p>
<p>With all things Arduino, you should understand the performance. <a class="el" href="classps2_1_1_keyboard.html#a87092193e003b94cf3ced61b36f3cde0">readScanCode</a> takes only a few machine instructions to complete. The methods that push data to the keyboard take longer (on the order of milliseconds) because of the handshake between the two devices and the throttling of sending one bit at a time at 10KHz.</p>
<p>All of the keyboard setup methods return a bool that reports success or not; you can test them if you feel it necessary, but few applications will really need to.</p>
<p>The biggest source of legitimate error is long-running interrupts which cause the PS2 clock interrupt to be skipped. The response to the clock pin must be swift and consistent, else you'll get garbled messages. The protocol is just robust enough to know that a failure has happened, but not robust enough to fully recover. If you're going to have another interrupt source in your project, see to it that its interrupt handler is as quick as possible. For its part, the PS2 handler is just a few instructions in all cases. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab4f105227693886082dc5754911524a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4f105227693886082dc5754911524a8">&#9670;&nbsp;</a></span>Keyboard()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::<a class="el" href="classps2_1_1_keyboard.html">Keyboard</a> </td>
          <td>(</td>
          <td class="paramtype">Diagnostics &amp;&#160;</td>
          <td class="paramname"><em>diagnostics</em> = <code>*Diagnostics::defaultInstance()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a47cb2867f1970bda5508df772563c9a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47cb2867f1970bda5508df772563c9a4">&#9670;&nbsp;</a></span>awaitStartup()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::awaitStartup </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>timeoutInMillis</em> = <code>750</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>After the keyboard gets power, the PS2 keyboard sends a code that indicates successful or unsuccessful startup. This waits for that to happen. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeoutInMillis</td><td>The number of milliseconds to wait for the keyboard to send its success/fail message.</td></tr>
  </table>
  </dd>
</dl>
<p>All this function does is wait for a proscribed amount of time (750ms, as suggested by the documentation), for a batSuccessful code. That's straightforward. The thing to be careful of is this - if you call this function in your <a class="el" href="classps2_1_1_keyboard.html#a7a7278f6c873169a08f3d146099de48a">begin()</a> and then upload the program to your Arduino, all this is going to do is delay for 750ms and then throw a diagnostic code - that's because the keyboard has power throughout the event and so doesn't power-on.</p>
<p>But once you get your device into the field, you really can count on the proper behavior (well, unless you have, say, a reset button that resets the Arduino).</p>
<p>There are two reasonable ways to deal with this - first, if you need to set up the keyboard, e.g. set up a scan code set and all that, you need to call this method before you get up to your shennanigans - the keyboard just won't respond until it's done booting. If that's you, and you're keen on having Diagnostic data, you can call SimpleDiagnostic::reset right after this to clean it up. If you're really keen on diagnostics, then you'll set up a "RELEASE" preprocessor symbol and skip the reset when you compile in that mode.</p>
<p>If you don't actually need to do any setup, then you can just skip calling this method. Yes, the keyboard will send that batSuccessful (hopefully) signal later on, but <a class="el" href="classps2_1_1_keyboard.html#a87092193e003b94cf3ced61b36f3cde0">readScanCode</a> specifically looks for that code and drops it on the floor when it arrives. </p>

</div>
</div>
<a id="a7a7278f6c873169a08f3d146099de48a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a7278f6c873169a08f3d146099de48a">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Starts the keyboard "service" by registering the external interrupt. setting the pin modes correctly and driving those needed to high. The best place to call this method is in the setup routine. </p>

</div>
</div>
<a id="a1b45f986c1ad696e3825c42065bbc4d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b45f986c1ad696e3825c42065bbc4d7">&#9670;&nbsp;</a></span>disable()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes it so the keyboard will no longer responsd to keystrokes. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="aaa52b7fd667372da29910af999563223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa52b7fd667372da29910af999563223">&#9670;&nbsp;</a></span>disableBreakAndTypematic() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::disableBreakAndTypematic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Re-enables typematic and break for all keys. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="a70f20a09039d83674dafa89852d2e002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70f20a09039d83674dafa89852d2e002">&#9670;&nbsp;</a></span>disableBreakAndTypematic() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::disableBreakAndTypematic </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>specificKeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numKeys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Instructs the keyboard to disable typematic (additional key down events when the user presses and holds a key) and break sequences (events that tell you when a key has been released) for a given set of keys. </p>
<p>This method has no effect if you are not in the <a class="el" href="namespaceps2.html">ps2</a> scan code set!</p>
<p>After calling this method, the keyboard will be disabled. call enable to fix that.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specificKeys</td><td>An array consisting of valid set-3 scan codes. If it contains a single invalid one, mayhem could ensue. </td></tr>
    <tr><td class="paramname">numKeys</td><td>The number of keys to change </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4b4591c2f4bb382036a6ab9f618b94bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b4591c2f4bb382036a6ab9f618b94bf">&#9670;&nbsp;</a></span>disableBreakCodes() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::disableBreakCodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes the keyboard no longer send "break" or "unmake" events when keys are released. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="a45b21796718e7ab5e3b13da51b60e9ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45b21796718e7ab5e3b13da51b60e9ae">&#9670;&nbsp;</a></span>disableBreakCodes() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::disableBreakCodes </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>specificKeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numKeys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Instructs the keyboard to stop sending "break" codes for some keys (that is, it disables the notifications that come when a key is released.) </p>
<p>This method has no effect if you are not in the <a class="el" href="namespaceps2.html">ps2</a> scan code set!</p>
<p>After calling this method, the keyboard will be disabled. call enable to fix that.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specificKeys</td><td>An array consisting of valid set-3 scan codes. If it contains a single invalid one, mayhem could ensue. </td></tr>
    <tr><td class="paramname">numKeys</td><td>The number of keys to change </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8e21303747d4f61838e327b0f61d73e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e21303747d4f61838e327b0f61d73e1">&#9670;&nbsp;</a></span>disableTypematic() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::disableTypematic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Makes the keyboard no longer send multiple key down events while a key is held down. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="aba7d6cac956d19257e89649330553f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba7d6cac956d19257e89649330553f43">&#9670;&nbsp;</a></span>disableTypematic() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::disableTypematic </td>
          <td>(</td>
          <td class="paramtype">const byte *&#160;</td>
          <td class="paramname"><em>specificKeys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numKeys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Instructs the keyboard to disable typematic (additional key down events when the user presses and holds a key) for a given set of keys. </p>
<p>This method has no effect if you are not in the <a class="el" href="namespaceps2.html">ps2</a> scan code set!</p>
<p>After calling this method, the keyboard will be disabled. call enable to fix that.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specificKeys</td><td>An array consisting of valid set-3 scan codes. If it contains a single invalid one, mayhem could ensue. </td></tr>
    <tr><td class="paramname">numKeys</td><td>The number of keys to change </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6e5a9d2f4e7cf961f70da765aed3d317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e5a9d2f4e7cf961f70da765aed3d317">&#9670;&nbsp;</a></span>echo()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::echo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends the "Echo" command to the keyboard, which should send an "Echo" in return. This can be used to verifies that a keyboard is connected and working properly. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="a19d10c145fd83c08c43309dc681e367f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19d10c145fd83c08c43309dc681e367f">&#9670;&nbsp;</a></span>enable()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows the keyboard to start sending data again. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="aaacfec6413b37b4874876d5cf31d31c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaacfec6413b37b4874876d5cf31d31c3">&#9670;&nbsp;</a></span>enableBreakAndTypematic()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::enableBreakAndTypematic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Re-enables typematic and break (unmake, key release) for all keys. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="a2a3cbce3d98353b6c18a501209ea7941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3cbce3d98353b6c18a501209ea7941">&#9670;&nbsp;</a></span>getScanCodeSet()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceps2.html#ab6ca63d33b95d82c35be1bb3e5479c80">ScanCodeSet</a> <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::getScanCodeSet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the current scancode set. </p>

</div>
</div>
<a id="a1d01a26f67fbedfb80c2a5080ce3e1a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d01a26f67fbedfb80c2a5080ce3e1a2">&#9670;&nbsp;</a></span>readId()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::readId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the device ID returned by the keyboard - according to the documentation, this will always be 0xab83. In the event of an error, this will return 0xffff. </p>

</div>
</div>
<a id="a87092193e003b94cf3ced61b36f3cde0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87092193e003b94cf3ced61b36f3cde0">&#9670;&nbsp;</a></span>readScanCode()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceps2.html#a5bc33a2de7ec8ab6dd653393f378956b">KeyboardOutput</a> <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::readScanCode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the last code sent by the keyboard. </p>
<p>You should call this function frequently, in your loop implementation most likely. The more often you call it, the more responsive your device will be. If you cannot call it frequently, make sure you have an appropriately-sized buffer (BufferSize).</p>
<p>If there is nothing to read, this method will return 'none'.</p>
<p>It can also return 'garbled' if there's been a framing error. A retry will be attempted, but that's far from a sure-thing. If you get this result, it likely indicates a collision with one of your interrupt handlers. Look into reducing the amount of processing you do in your interrupt handlers.</p>
<p>In any case, if you see a 'garbled' result, you might be losing some keystrokes, so do what you can to make sure that it doesn't impact the device too badly. </p>

</div>
</div>
<a id="a3a9e5414dda4640678bade8115a37f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a9e5414dda4640678bade8115a37f4d">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::reset </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>timeoutInMillis</em> = <code>1000</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets the keyboard and returns true if the keyboard appears well, false otherwise. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeoutInMillis</td><td>The number of milliseconds to wait for the keyboard to send its success/fail message.</td></tr>
  </table>
  </dd>
</dl>
<p>This can take up to a second to complete. (Because of the Protocol spec). </p><dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="a9bd0bd371ca016b923de9a5f6b468013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bd0bd371ca016b923de9a5f6b468013">&#9670;&nbsp;</a></span>resetToDefaults()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::resetToDefaults </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restores scan code set, typematic rate, and typematic delay. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="abae81db544fd55b6aaba74e625d84d4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abae81db544fd55b6aaba74e625d84d4a">&#9670;&nbsp;</a></span>sendLedStatus()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::sendLedStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceps2.html#ab1f1a2199d2e9075dbc006a91fd2f71c">KeyboardLeds</a>&#160;</td>
          <td class="paramname"><em>ledStatus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the keyboard's onboard LED's. </p>
<p>This method takes several milliseconds and ties up the communication line with the keyboard. You'll probably want to keep a variable somewhere that records what the current state of the LED's are, and ensure that you only call this function when they actually change. </p><dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="a0f51d11f67c75ed2b688bcf62a68d9cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f51d11f67c75ed2b688bcf62a68d9cb">&#9670;&nbsp;</a></span>setScanCodeSet()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::setScanCodeSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceps2.html#ab6ca63d33b95d82c35be1bb3e5479c80">ScanCodeSet</a>&#160;</td>
          <td class="paramname"><em>newScanCodeSet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the current scancode set. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<a id="ac880a2789415d57986bd02a4566b5560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac880a2789415d57986bd02a4566b5560">&#9670;&nbsp;</a></span>setTypematicRateAndDelay()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;int DataPin, int ClockPin, int BufferSize = 16, typename Diagnostics = NullDiagnostics&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classps2_1_1_keyboard.html">ps2::Keyboard</a>&lt; DataPin, ClockPin, BufferSize, Diagnostics &gt;::setTypematicRateAndDelay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceps2.html#a511e9920b7f2ef164f91c1740d0244bf">TypematicRate</a>&#160;</td>
          <td class="paramname"><em>rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceps2.html#a4adac7b7b12f82a8604ab93b647ba858">TypematicStartDelay</a>&#160;</td>
          <td class="paramname"><em>startDelay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the typematic rate (how fast presses come) and the delay (the time between key down and the start of auto-repeating. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if the keyboard responded appropriately and false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="ps2___keyboard_8h_source.html">ps2_Keyboard.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceps2.html">ps2</a></li><li class="navelem"><a class="el" href="classps2_1_1_keyboard.html">Keyboard</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
